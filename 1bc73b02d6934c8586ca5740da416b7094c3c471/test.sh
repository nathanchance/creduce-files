#!/usr/bin/env bash

"${HOME}"/usr/bin/clang -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -std=gnu89 --target=s390x-linux-gnu --prefix=${HOME}/cbl/toolchains/binutils/bin/ --gcc-toolchain=${HOME}/cbl/toolchains/binutils -no-integrated-as -m64 -fPIE -mbackchain -msoft-float -march=z196 -mtune=z196 -mpacked-stack -fno-asynchronous-unwind-tables -fno-delete-null-pointer-checks -O2 -fno-stack-protector -mno-global-merge -ftrivial-auto-var-init=pattern -fno-strict-overflow -fno-merge-all-constants -fno-stack-check -fprofile-arcs -ftest-coverage -fsanitize=kernel-address -mllvm -asan-mapping-offset=0x18000000000000 -mllvm -asan-globals=1 -mllvm -asan-instrumentation-with-call-threshold=0 -mllvm -asan-stack=0 --param asan-instrument-allocas=1 -fsanitize-coverage=trace-pc -fsanitize-coverage=trace-cmp -c trace_events_filter.i || exit ${?}

"${HOME}"/cbl/git/tc-build/build/llvm/stage1/bin/clang -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -std=gnu89 --target=s390x-linux-gnu --prefix=${HOME}/cbl/toolchains/binutils/bin/ --gcc-toolchain=${HOME}/cbl/toolchains/binutils -no-integrated-as -m64 -fPIE -mbackchain -msoft-float -march=z196 -mtune=z196 -mpacked-stack -fno-asynchronous-unwind-tables -fno-delete-null-pointer-checks -O2 -fno-stack-protector -mno-global-merge -ftrivial-auto-var-init=pattern -fno-strict-overflow -fno-merge-all-constants -fno-stack-check -fprofile-arcs -ftest-coverage -fsanitize=kernel-address -mllvm -asan-mapping-offset=0x18000000000000 -mllvm -asan-globals=1 -mllvm -asan-instrumentation-with-call-threshold=0 -mllvm -asan-stack=0 --param asan-instrument-allocas=1 -fsanitize-coverage=trace-pc -fsanitize-coverage=trace-cmp -c trace_events_filter.i |& grep "DominatorTree is different than a freshly computed one"
